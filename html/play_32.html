<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>play_32</title>

    <link href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&display=swap" rel="stylesheet"> <!--게임화면 폰트(구글폰트)-->

    <link rel="stylesheet" href="CSS/play_32.css" />

</head>

<body>
    <!--강 수 표시-->
    <h1>32강</h1>
    <!--현재 진행 표시-->
    <div id="ongoing">(1/16)</div>

    <!--움짤-->
    <div class="gif-box">
        <figure class="gif-item">
            <img src="./소금상/[소금][1991][사카구치 켄타로].gif" alt="">
            <figcaption>사카구치 켄타로</figcaption>
        </figure>    

        <div class="vs">VS</div>

        <figure class="gif-item">    
            <img src="./소금상/[소금][1982][아야노고].gif" alt="">
            <figcaption>아야노 고</figcaption>
        </figure>
    </div>

    <div class="confetti" id="confetti"></div>

    <script>
        // 팡파레 효과
        function createConfettiPiece() 
        {
            const confetti = document.getElementById('confetti');
            const piece = document.createElement('div');
            piece.style.setProperty('--color', `${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}`);   /*조각 색깔 랜덤*/
            piece.style.left = `${Math.random() * 100}vw`;                                                                  /*조각 화면 랜덤한 위치에서 시작하도록*/                                                               
            piece.style.animationDuration = `${Math.random() * 2 + 1}s`;                                                    /*조각 떨어지는 시간 랜덤 설정*/
            confetti.appendChild(piece)

            setTimeout(() => 
            {
                confetti.removeChild(piece);
            }, 3000);                               /*3초 뒤 조각 제거*/
        }

        function startConfetti() 
        {
            for (let i = 0; i < 100; i++)   /*100번 반복*/
            {
                createConfettiPiece();      /*컨페티 조각 하나*/
            }
        }

        // 움짤 선택
        const gifItems = document.querySelectorAll('.gif-item img');
        const ongoing = document.querySelector('#ongoing');
        const vsText = document.querySelector('.vs');
        const figures = document.querySelectorAll('.gif-item');
        const figCaptions = document.querySelectorAll('figcaption');

        gifItems.forEach(function(gif) 
        {
            gif.addEventListener('click', function() 
            {
                // 하나의 움짤만 선택되도록 
                gifItems.forEach(function(item) 
                {
                    item.classList.remove('selected');
                });

                // 선택된 움짤에 팡파레 효과
                startConfetti();

                // 선택된 움짤에 효과 추가
                gif.classList.add('selected');

                // 강 수는 남기고, 나머지 요소들 숨기기
                document.querySelector('h1').classList.remove('hidden');      
                document.querySelector('#ongoing').classList.add('hidden');   /*진행 상태 숨기기*/
                vsText.classList.add('hidden');                               /*vs 텍스트 숨기기*/
                figures.forEach(function(figure) 
                {
                    if (!figure.contains(gif.closest('figure'))) 
                    {
                        figure.classList.add('hidden');                       /*선택 안 된 움짤 숨기기*/
                    }
                });

                // 선택된 움짤의 배우 이름 숨기기
                const selectedFigCaption = gif.closest('figure').querySelector('figcaption');
                selectedFigCaption.classList.add('hidden');  
            });
        });
    </script>
</body>
</html>
